(this.webpackJsonpreacttutorial6=this.webpackJsonpreacttutorial6||[]).push([[0],{42:function(t,e,n){},72:function(t,e,n){"use strict";n.r(e);var c=n(1),s=n.n(c),r=n(32),o=n.n(r),a=(n(42),n(0)),i=function(t){var e=t.title;return Object(a.jsx)("header",{className:"Header",children:Object(a.jsx)("h1",{children:e})})},u=n(5),j=n(2),l=function(){var t=Object(j.g)((function(t){return t.posts})),e=Object(j.g)((function(t){return t.search})),n=Object(j.f)((function(t){return t.setSearch})),s=Object(j.f)((function(t){return t.setSearchResults}));return Object(c.useEffect)((function(){var n=t.filter((function(t){return t.body.toLowerCase().includes(e.toLowerCase())||t.title.toLowerCase().includes(e.toLowerCase())}));s(n.reverse())}),[t,e,s]),Object(a.jsxs)("nav",{className:"Nav",children:[Object(a.jsxs)("form",{className:"searchForm",onSubmit:function(t){return t.preventDefault()},children:[Object(a.jsx)("label",{htmlFor:"search",children:"Search Post"}),Object(a.jsx)("input",{type:"text",id:"search",placeholder:"Search Posts",value:e,onChange:function(t){return n(t.target.value)}})]}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(u.b,{to:"/",children:"Home"})}),Object(a.jsx)("li",{children:Object(a.jsx)(u.b,{to:"/post",children:"Post"})}),Object(a.jsx)("li",{children:Object(a.jsx)(u.b,{to:"/about",children:"About"})})]})]})},b=function(){var t=Object(j.g)((function(t){return t.postCount})),e=new Date;return Object(a.jsxs)("footer",{className:"Footer",children:[Object(a.jsxs)("p",{children:[t," Blog Posts"]}),Object(a.jsxs)("p",{className:"postDate",style:{marginLeft:"2rem"},children:["\xa9 ",e.getFullYear()]})]})},d=function(t){var e=t.post;return Object(a.jsxs)("article",{className:"post",children:[Object(a.jsxs)(u.b,{to:"/post/".concat(e.id),children:[Object(a.jsx)("h2",{children:e.title}),Object(a.jsx)("p",{className:"postDate",children:e.datetime})]}),Object(a.jsx)("p",{className:"postBody",children:e.body.length>=25?"".concat(e.body.slice(0,25),"..."):e.body})]})},p=function(t){var e=t.posts;return Object(a.jsx)(a.Fragment,{children:e.map((function(t){return Object(a.jsx)(d,{post:t},t.id)}))})},h=function(t){var e=t.fetchError,n=t.isLoading,c=Object(j.g)((function(t){return t.searchResults}));return Object(a.jsxs)("main",{className:"Home",children:[n&&Object(a.jsx)("p",{className:"statusMsg",children:"Loading posts..."}),!n&&e&&Object(a.jsx)("p",{className:"statusMsg",style:{color:"red"},children:e}),!n&&!e&&(c.length?Object(a.jsx)(p,{posts:c}):Object(a.jsx)("p",{className:"statusMsg",children:"No posts to display"}))]})},O=n(3),f=n(73),x=function(){var t=Object(O.f)(),e=Object(j.g)((function(t){return t.posts})),n=Object(j.g)((function(t){return t.postTitle})),c=Object(j.g)((function(t){return t.postBody})),s=Object(j.f)((function(t){return t.savePost})),r=Object(j.f)((function(t){return t.setPostTitle})),o=Object(j.f)((function(t){return t.setPostBody}));return Object(a.jsxs)("main",{className:"NewPost",children:[Object(a.jsx)("h2",{children:"New Post"}),Object(a.jsxs)("form",{onSubmit:function(r){r.preventDefault();var o=e.length?e.length+1:1,a=Object(f.a)(new Date,"MMM dd, yyyy pp");s({id:o,datetime:a,title:n,body:c}),t.push("/")},className:"newPostForm",children:[Object(a.jsxs)("div",{className:"post-group",children:[Object(a.jsx)("label",{htmlFor:"postTitle",children:"Title:"}),Object(a.jsx)("input",{type:"text",required:!0,value:n,onChange:function(t){return r(t.target.value)}})]}),Object(a.jsxs)("div",{className:"post-group",children:[Object(a.jsx)("label",{htmlFor:"postBody",children:"Post:"}),Object(a.jsx)("textarea",{id:"postBody",required:!0,value:c,onChange:function(t){return o(t.target.value)}})]}),Object(a.jsx)("button",{type:"submit",children:"Submit"})]})]})},m=function(){var t=Object(O.f)(),e=Object(O.g)().id,n=Object(j.g)((function(t){return t.editTitle})),s=Object(j.g)((function(t){return t.editBody})),r=Object(j.f)((function(t){return t.editPost})),o=Object(j.f)((function(t){return t.setEditTitle})),i=Object(j.f)((function(t){return t.setEditBody})),l=Object(j.g)((function(t){return t.getPostById}))(e);Object(c.useEffect)((function(){l&&(o(l.title),i(l.body))}),[l,o,i]);return Object(a.jsxs)("main",{className:"NewPost",children:[n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Edit Post"}),Object(a.jsxs)("form",{onSubmit:function(t){return t.preventDefault()},className:"newPostForm",children:[Object(a.jsx)("label",{htmlFor:"postTitle",children:"Title:"}),Object(a.jsx)("input",{type:"text",required:!0,id:"postTitle",value:n,onChange:function(t){return o(t.target.value)}}),Object(a.jsx)("label",{htmlFor:"postBody",children:"Body:"}),Object(a.jsx)("textarea",{required:!0,id:"postBody",value:s,onChange:function(t){return i(t.target.value)}}),Object(a.jsx)("button",{type:"button",onClick:function(){return function(e){var c=Object(f.a)(new Date,"MMM dd, yyyy pp");r({id:e,datetime:c,title:n,body:s}),t.push("/post/".concat(e))}(l.id)},children:"Edit post"})]})]}),!n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Post Not Found!"}),Object(a.jsx)("p",{children:"Well, that's disappointing"}),Object(a.jsx)("p",{children:Object(a.jsx)(u.b,{to:"/",children:"Visit our Homepage"})})]})]})},g=function(){var t=Object(O.f)(),e=Object(O.g)().id,n=Object(j.f)((function(t){return t.deletePost})),c=Object(j.g)((function(t){return t.getPostById}))(e);return Object(a.jsx)("main",{className:"PostPage",children:Object(a.jsxs)("article",{children:[c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:c.title}),Object(a.jsx)("p",{children:c.datetime}),Object(a.jsx)("p",{children:c.body}),Object(a.jsx)(u.b,{to:"/edit/".concat(c.id),children:Object(a.jsx)("button",{className:"editButton",children:"Edit Post"})}),Object(a.jsx)("button",{className:"deleteButton",onClick:function(){return function(e){n(e),t.push("/")}(c.id)},children:"Delete Post"})]}),!c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Post not Found"}),Object(a.jsx)("p",{children:"Well it's disappointing"}),Object(a.jsx)("p",{children:Object(a.jsx)(u.b,{to:"/",children:"Visit our Home page"})})]})]})})},v=function(){return Object(a.jsxs)("main",{className:"About",children:[Object(a.jsx)("h2",{children:"About"}),Object(a.jsx)("p",{style:{marginTop:"1rem"},children:"This blog app is a project in the Learn React tutorial series."})]})},y=function(){return Object(a.jsx)("main",{className:"Missing",children:"Page not Found"})},P=n(11),N=n.n(P),B=n(13),w=n(20),E=n(16),T=n.n(E),S=function(t){var e=Object(c.useState)([]),n=Object(w.a)(e,2),s=n[0],r=n[1],o=Object(c.useState)(null),a=Object(w.a)(o,2),i=a[0],u=a[1],j=Object(c.useState)(!1),l=Object(w.a)(j,2),b=l[0],d=l[1];return Object(c.useEffect)((function(){var e=!0,n=T.a.CancelToken.source();(function(){var t=Object(B.a)(N.a.mark((function t(c){var s;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,T.a.get(c,{cancelToken:n.token});case 4:s=t.sent,e&&(r(s.data),u(null)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e&&(u(t.t0.message),r([]));case 11:return t.prev=11,e&&d(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}})()(t);return function(){e=!1,n.cancel()}}),[t]),{data:s,fetchError:i,isLoading:b}};var F=function(){var t=Object(j.f)((function(t){return t.setPosts})),e=S("http://localhost:3500/posts"),n=e.data,s=e.fetchError,r=e.isLoading;return Object(c.useEffect)((function(){t(n)}),[n,t]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(i,{title:"React JS Blog"}),Object(a.jsx)(l,{}),Object(a.jsxs)(O.c,{children:[Object(a.jsx)(O.a,{exact:!0,path:"/",children:Object(a.jsx)(h,{isLoading:r,fetchError:s})}),Object(a.jsx)(O.a,{exact:!0,path:"/post",component:x}),Object(a.jsx)(O.a,{path:"/edit/:id",component:m}),Object(a.jsx)(O.a,{path:"/post/:id",component:g}),Object(a.jsx)(O.a,{exact:!0,path:"/about",component:v}),Object(a.jsx)(O.a,{path:"*",component:y})]}),Object(a.jsx)(b,{})]})},k=n(36),C=n(35),L=T.a.create({baseURL:"http://localhost:3500"}),M=Object(j.d)({posts:[],setPosts:Object(j.b)((function(t,e){t.posts=e})),postTitle:"",setPostTitle:Object(j.b)((function(t,e){t.postTitle=e})),postBody:"",setPostBody:Object(j.b)((function(t,e){t.postBody=e})),editTitle:"",setEditTitle:Object(j.b)((function(t,e){t.editTitle=e})),editBody:"",setEditBody:Object(j.b)((function(t,e){t.editBody=e})),search:"",setSearch:Object(j.b)((function(t,e){t.search=e})),searchResults:[],setSearchResults:Object(j.b)((function(t,e){t.searchResults=e})),postCount:Object(j.c)((function(t){return t.posts.length})),getPostById:Object(j.c)((function(t){return function(e){return t.posts.find((function(t){return t.id.toString()===e}))}})),savePost:Object(j.e)(function(){var t=Object(B.a)(N.a.mark((function t(e,n,c){var s,r,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getState(),r=s.posts,t.prev=1,t.next=4,L.post("/posts",n);case 4:o=t.sent,e.setPosts([].concat(Object(C.a)(r),[o.data])),e.setPostTitle(""),e.setPostBody(""),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Error: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n,c){return t.apply(this,arguments)}}()),deletePost:Object(j.e)(function(){var t=Object(B.a)(N.a.mark((function t(e,n,c){var s,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getState(),r=s.posts,t.prev=1,t.next=4,L.delete("/posts/".concat(n));case 4:e.setPosts(r.filter((function(t){return t.id!==n}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("Error: ".concat(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,c){return t.apply(this,arguments)}}()),editPost:Object(j.e)(function(){var t=Object(B.a)(N.a.mark((function t(e,n,c){var s,r,o,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getState(),r=s.posts,o=n.id,t.prev=2,t.next=5,L.put("/posts/".concat(o),n);case 5:a=t.sent,e.setPosts(r.map((function(t){return t.id===o?Object(k.a)({},a.data):t}))),e.setEditTitle(""),e.setEditBody(""),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("Error: ".concat(t.t0.message));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,n,c){return t.apply(this,arguments)}}())});o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(j.a,{store:M,children:Object(a.jsx)(u.a,{children:Object(a.jsx)(O.a,{path:"/",component:F})})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.c1719504.chunk.js.map